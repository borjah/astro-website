---
import "../../styles/global.css";
import Layout from "../../layouts/Layout.astro";
import { getCollection, render } from "astro:content";
import { ExternalLink, Github } from "@lucide/astro";

export async function getStaticPaths() {
  const projects = await getCollection("projects");
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { data, slug } = project;
const { name, tags, url, github } = data;

const { Content } = await render(project);

export const prerender = true;
---

<Layout title="Borja Hidalgo Delgado - Portfolio">
  <section
    id="project"
    class="snap-start min-h-screen py-20 px-6 sm:px-12 lg:px-32 text-gray-100 flex flex-col justify-center gap-6"
  >
    <a href="/#projects" class="hover:underline opacity-70 transition">
        ‚Üê Volver
    </a>
    <header class="mb-12 text-center flex flex-col gap-4">
        <h1 
        transition:name={`name-${slug}`}
        class="text-5xl text-start font-extrabold bg-gradient-to-r from-amber-200 via-orange-300 to-amber-200 bg-clip-text text-transparent">
            {name}
        </h1>
        <div class="flex gap-3 mt-4">
            {url && (
                <a href={url} target="_blank" rel="noopener" 
                class="flex items-center justify-center w-11 h-11 rounded-full border border-white/20 text-white/70 bg-white/5 backdrop-blur-sm shadow-sm 
                hover:text-[#02fd9a] hover:border-[#02fd9a] hover:bg-[#02fd9a]/10 transition duration-300">
                    <ExternalLink class="w-5 h-5" />
                </a>
            )}
            {github && (
                <a href={github} target="_blank" rel="noopener" 
                    class="flex items-center justify-center w-11 h-11 rounded-full border border-white/20 text-white/70 bg-white/5 backdrop-blur-sm shadow-sm 
                    hover:text-[#02fd9a] hover:border-[#02fd9a] hover:bg-[#02fd9a]/10 transition duration-300">
                    <Github class="w-5 h-5" />
                </a>
            )}
        </div>
        {tags && tags.length > 0 && (
            <ul class="mt-4 flex flex-wrap gap-2">
                {tags.map((tag) => (
                <li class="rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80 hover:border border-[#02fd9a] transition">
                    {tag}
                </li>
                ))}
            </ul>
        )}
    </header>

    <div class="prose prose-invert">
        <Content />
    </div>
  </section>
</Layout>
